<!DOCTYPE html>
<html>
  <head>
    <title>ChatBot</title>
  </head>
  <body>
  
    <div class="js"></div>
    <div class="cart"></div>
    <div class="timee"></div>
    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>
    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>
    <script type="text/babel">
      
    function ChatInput({chatMessages,setChatMessages})
    { const[inputText,setInputText]=React.useState(' ');

      function saveInputText(event)
      {
         setInputText(event.target.value);
      }
      function sendMessage()
      {
        console.log(inputText);
        const response=Chatbot.getResponse(inputText);
          setChatMessages(
                [
                  ...chatMessages,
                  {
                    message:inputText,
                    sender:'user',
                    id: crypto.randomUUID()
                  },
                  {
                    message:response,
                    sender:'robot',
                    id: crypto.randomUUID()

                  }
                ]);
                
                console.log(response);
                setInputText('');
      }
      return (
      <>
        <input 
        placeholder="Send a Message to ChatBot " 
        size="30" 
        onChange={saveInputText}
        value={inputText} //with this we can control the text inside the input box
        />
        <button onClick={sendMessage}>Send</button>
      </>

      );
    }
    function ChatImage({message,sender}) // name 
    {
     // const message = props.message;
   /* if(sender=="robot")
    {
        return(
          <>
          
          <img src="robot.png" width="50px" />
          {message}
          </>
        );
    }*/
      return (

        <div>
          {sender==="robot" && 
          (<img src="robot.png" width="50px" />)}
          
          {sender==="user" && 
          (<img src="user.png" width="50px" />)}
         {message}
        </div>
      );
    }
   
    function Messages({chatMessages}) // already with this name one function u created but here first letter Caps
    {
      
           
       return(
        <>
        
        {chatMessages.map((chatMessage)=>
          {
            return (
            <ChatImage 
              message={chatMessage.message}
              sender={chatMessage.sender}
              key={chatMessage.id}
              />
            );
          }
          )}
        </>
       );
          
    }
    
    function App()
    {
        // lifting the state up to share this  const [chatMessages,setChatMessages]=React.useState... to both chatInput function and and also for Message function because if it is only in Messages() func it will not bes used by ChatInput()
       const [chatMessages,setChatMessages]=React.useState([
          {
            message:"hello",
            sender:"user",
            id:'id1'
          },
          {
            message:"Hello! This is Genova, How Can I Help You? ",
            sender:"robot",
            id:'id2'
          },
          {
            message:"can you get me todays date?",
            sender:"user",
            id:'id3'
          },
          {
            message:" September 31",
            sender:"robot",
            id:'id4'
          }
          ]); // this all are initial message if not understand see u r note 
      // const chatMessages=array[0]; // initial message
       //const setChatMessages=array[1]; // updater Function has shortcuts in upper
      
          

     return (
        <>
            <ChatInput chatMessages={chatMessages}
                        setChatMessages={setChatMessages}
            />
            <Messages chatMessages={chatMessages} />

        </>
            
          
        

      );

    }
    
    const container=document.querySelector('.js');
    ReactDOM.createRoot(container).render(<App />);
    
    </script>
    <script src="react-basics.js"></script>
  
  </body>
</html>
